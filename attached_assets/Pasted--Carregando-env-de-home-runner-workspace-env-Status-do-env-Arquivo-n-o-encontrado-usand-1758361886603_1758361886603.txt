🔍 Carregando .env de: /home/runner/workspace/.env
📄 Status do .env: Arquivo não encontrado (usando variáveis de ambiente do sistema)
🔍 Variáveis de ambiente carregadas:
   LOGIN: ✅ Presente
   SENHA: ✅ Presente
   DATABASE_URL: ✅ Presente
   NODE_ENV: undefined
⚠️ CIELO_WEBHOOK_SECRET não configurado - webhook validation desabilitada (desenvolvimento apenas)
✅ Todas as configurações obrigatórias estão presentes
🔒 Validação de segurança concluída com sucesso

🚀 CONFIGURAÇÃO AUTOMÁTICA APLICADA:
=====================================
🌍 Ambiente: development
🔌 Porta: 3000
🏠 Host: 0.0.0.0
💾 Armazenamento: local
🔑 Sessão: Configurada
📞 Contato: Configurado via ambiente/banco
=====================================

🔗 Conectando ao Supabase Storage: https://tkzzxsbwkgcdmcreducm.supabase.co
Database URL configured: Yes
Testing database connection...
Attempting to connect to: postgresql://***:***@aws-1-sa-east-1.pooler.supabase.com:6543/postgres
🚀 Inicializando servidor unificado UNIPET + Admin...
🔌 Inicializando banco de dados...
🔌 Inicializando conexão com banco de dados...
PostgreSQL parameter: DateStyle = ISO, MDY
PostgreSQL parameter: IntervalStyle = postgres
PostgreSQL parameter: TimeZone = UTC
PostgreSQL parameter: application_name = Supavisor
PostgreSQL parameter: client_encoding = UTF8
PostgreSQL parameter: default_transaction_read_only = off
PostgreSQL parameter: in_hot_standby = off
PostgreSQL parameter: integer_datetimes = on
PostgreSQL parameter: is_superuser = off
PostgreSQL parameter: scram_iterations = 4096
PostgreSQL parameter: server_encoding = UTF8
PostgreSQL parameter: server_version = 17.4
PostgreSQL parameter: session_authorization = postgres
PostgreSQL parameter: standard_conforming_strings = on
✅ Conexão com banco de dados estabelecida com sucesso
📊 Pool configurado com 20 conexões máximas
✅ Banco de dados inicializado com sucesso
🛣️ Registrando rotas do UNIPET (/api/*)...
📁 [STATIC-FILES] Static file serving disabled - using Supabase Storage
✅ Rotas do UNIPET registradas
🔧 Registrando rotas do ADMIN (/admin/api/*)...
🔧 Admin APIs em desenvolvimento: será usado proxy em /admin/api/*
🔧 Configurando proxy para sistema Admin (desenvolvimento)...
✅ Proxy do Admin configurado para desenvolvimento
📁 Modo de desenvolvimento detectado
🛡️ Configurando tratamento de erros...

🎉 SERVIDOR UNIFICADO INICIADO COM SUCESSO!
==========================================
🌐 URL: http://0.0.0.0:5000
🏠 Host: 0.0.0.0 (Aceita conexões externas)
🌍 Ambiente: development
📁 Diretório: /home/runner/workspace
🔌 Banco: Conectado e saudável

📋 SERVIÇOS DISPONÍVEIS:
  🦄 UNIPET:
    • Frontend: / (raiz)
    • APIs: /api/*
    • Health: /api/health
  🔧 ADMIN:
    • Frontend: /admin
    • APIs: /admin/api/*
    • Health: /admin/health

🔒 FUNCIONALIDADES:
  • Roteamento unificado
  • Banco de dados compartilhado
  • Sessions e cookies configurados
  • Tratamento de erros global
  • Admin com Hot Reload (Vite)
  • UNIPET frontend externo (recomendado)
==========================================


> rest-express@1.0.0 dev
> cross-env NODE_ENV=development tsx server/index.ts

Database connection successful!
Site settings table exists: true
whatsapp column exists: true
email column exists: true
phone column exists: true
instagram_url column exists: true
facebook_url column exists: true
linkedin_url column exists: true
youtube_url column exists: true
cnpj column exists: true
business_hours column exists: true
Database URL configured: Yes
Testing database connection...
Attempting to connect to: postgresql://***:***@aws-1-sa-east-1.pooler.supabase.com:6543/postgres
our_story column exists: true
9:50:37 AM [express] serving on port 3002
privacy_policy column exists: true
terms_of_use column exists: true
address column exists: true
main_image column exists: true
network_image column exists: true
about_image column exists: true
cores column exists: true
PostgreSQL parameter: DateStyle = ISO, MDY
PostgreSQL parameter: IntervalStyle = postgres
PostgreSQL parameter: TimeZone = UTC
PostgreSQL parameter: application_name = Supavisor
PostgreSQL parameter: client_encoding = UTF8
PostgreSQL parameter: default_transaction_read_only = off
PostgreSQL parameter: in_hot_standby = off
PostgreSQL parameter: integer_datetimes = on
PostgreSQL parameter: is_superuser = off
PostgreSQL parameter: scram_iterations = 4096
PostgreSQL parameter: server_encoding = UTF8
PostgreSQL parameter: server_version = 17.4
PostgreSQL parameter: session_authorization = postgres
PostgreSQL parameter: standard_conforming_strings = on
Database connection successful!
Site settings table exists: true
whatsapp column exists: true
email column exists: true
phone column exists: true
instagram_url column exists: true
facebook_url column exists: true
linkedin_url column exists: true
youtube_url column exists: true
cnpj column exists: true
business_hours column exists: true
our_story column exists: true
privacy_policy column exists: true
terms_of_use column exists: true
address column exists: true
main_image column exists: true
network_image column exists: true
about_image column exists: true
cores column exists: true