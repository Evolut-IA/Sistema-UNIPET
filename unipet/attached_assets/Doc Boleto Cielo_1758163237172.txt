API Cielo – Pagamentos via Boleto Bancário
A API E-commerce da Cielo oferece suporte à geração de transações por boleto bancário[1]. Para utilizá-lo, o lojista deve primeiro contratar o serviço de cobrança com o banco emissor e configurar o meio de pagamento “boleto” conforme a documentação[2]. Os boletos no modelo registrado são obrigatórios (para reduzir fraudes) e permitem, por exemplo, a negativação do CPF/CNPJ de compradores que não pagarem[3]. Na resposta de criação da transação, a API retorna a URL do boleto e os códigos de barras/linha digitável que a loja deve exibir ao comprador[4]. Note que boletos do Banco do Brasil não contam com conciliação automática (não há notificação automática de pagamento)[5]. Em geral, após emitir o boleto pela API, o cliente paga via agência bancária ou internet banking e o lojista deve conciliar esses pagamentos manualmente através dos arquivos CNAB fornecidos pelo banco.
Endpoints da API
Para criar um boleto, use o endpoint POST /1/sales/ na URL transacional da Cielo (sandbox ou produção)[6]. Em sandbox: https://apisandbox.cieloecommerce.cielo.com.br/1/sales/; em produção: https://api.cieloecommerce.cielo.com.br/1/sales/[6]. Para consultar o status de uma transação existente, use GET /1/sales/{PaymentId} na URL de consulta (apiquery), passando o PaymentId retornado na criação[7][8]. Observação: só é possível consultar transações dos últimos 3 meses[8]. Ambos os endpoints exigem os cabeçalhos de autenticação (MerchantId e MerchantKey) e usam HTTPS/TLS 1.2[9][10].
Parâmetros de Requisição e Resposta
Na requisição de criação de boleto, deve-se enviar um JSON contendo ao menos um MerchantOrderId único, os dados do cliente (nome, CPF/CNPJ, endereço) e o objeto Payment com Type = "Boleto", informando valor, vencimento, instruções, cedente etc. (os detalhes exatos do payload podem ser obtidos em exemplos de implementação da Cielo). Na resposta (200 OK), a API retorna diversos campos importantes para o boleto:
	PaymentId – identificador único do pagamento (GUID)[11].
	Instructions – instruções de pagamento do boleto (texto livre)[12].
	ExpirationDate – data de vencimento (AAAA-MM-DD)[13].
	Url – link público do boleto gerado (PDF ou boleto Web)[14].
	Number – “Nosso Número” do boleto (string numérica)[15].
	BarCodeNumber – código de barras numérico completo[16].
	DigitableLine – linha digitável do boleto[17]. Para boletos do Banco do Brasil, este campo não é retornado[18].
	Assignor – nome do cedente (loja)[19].
	Address – endereço do cedente[20].
	Identification – documento do cedente (CPF/CNPJ, sem pontuação)[21].
	Status – status transacional (código numérico)[22].
Esses campos devem ser extraídos da resposta JSON para apresentar o boleto ao cliente e registrar a cobrança.
Exemplo de Uso
Em geral, a integração consiste em: (1) coletar dados do pedido e do cliente; (2) enviar uma requisição HTTP POST com cabeçalhos MerchantId/MerchantKey e corpo JSON contendo as informações acima; (3) processar a resposta JSON da Cielo, obtendo a URL e códigos do boleto; e (4) exibir essas informações ao comprador (por exemplo, apresentar o PDF do boleto ou a linha digitável para impressão). A Cielo oferece exemplos de código (Shell/Node/PHP/etc.) na sua documentação referencial para cada chamada. Em Python, por exemplo, pode-se usar requests.post(...) indicando o endpoint correto e incluindo os campos de pagamento conforme descrito.
Fluxo de Geração e Processamento
Figura: Fluxo típico de uma transação de boleto bancário. A sequência comum é: o comprador escolhe pagar por boleto no checkout; a loja envia a requisição POST /sales para a Cielo; a Cielo registra o boleto junto ao banco emissor e retorna o código de barras/url (etapas 3–5); a loja então exibe o boleto ao cliente (etapa 6). O comprador paga o boleto em qualquer banco ou internet banking (etapa 7); o banco emissor liquida essa cobrança e fornece o retorno por arquivo CNAB (etapa 8). Por fim, a Cielo e a loja confirmam o pagamento (etapas 9–10), atualizando o status do pedido para concluído.
Tratamento de Erros e Códigos de Retorno
Toda resposta da API inclui um HTTP status code padrão[9]. Códigos 2xx indicam sucesso (por exemplo, 200 OK na criação ou consulta); códigos 4xx sinalizam erro de requisição (ex.: 401 Unauthorized se MerchantId/Key inválidos) e 5xx indicam erro interno. A documentação da Cielo lista mensagens de erro detalhadas na seção “Erros da API”. Já o campo Status retornado em transações segue a tabela de status transacional: boletos normalmente transitam por NotFinished (0), Authorized (1) e PaymentConfirmed (2) quando pagos[23]. Note que o status “Voided” (10) não se aplica a boletos[24] (boleto é cancelado apenas via atendimento bancário).
Segurança e Autenticação
Todas as chamadas devem ser feitas via HTTPS com protocolo TLS 1.2 para garantir criptografia ponta-a-ponta[10]. Na header da requisição devem constar as credenciais da loja (MerchantId e MerchantKey) fornecidas pela Cielo[9]. Essas credenciais são obtidas no portal da Cielo (consulte “Gerenciamento de Credenciais” para gerar/revogar seus tokens[9][25]). As URLs base da API são diferentes para cada ambiente: por exemplo, o endpoint de criação de vendas é https://apisandbox.cieloecommerce.cielo.com.br/1/sales/ em sandbox e https://api.cieloecommerce.cielo.com.br/1/sales/ em produção[6][26]. Seguindo essas orientações, a integração por boleto estará configurada de forma segura e conforme as regras da Cielo.
Fontes: Documentação oficial Cielo E-commerce – Guia de Boleto[2][27][18][23][9][10]. (Referências internas da Cielo usadas para todos os detalhes acima.)

[1] Sobre a API E-commerce Cielo
https://docs.cielo.com.br/ecommerce-cielo/docs/sobre-api-ecommerce
[2] [3] [5] Boleto
https://docs.cielo.com.br/ecommerce-cielo/docs/boleto
[4] [6] [11] [12] [13] [14] [15] [16] [17] [18] [19] [20] [21] [22] [27] Criar pagamento com boleto
https://docs.cielo.com.br/ecommerce-cielo/reference/boleto-api
[7] [8] Consultar por PaymentId
https://docs.cielo.com.br/ecommerce-cielo/reference/consulta-paymentid-api
[9] [26] Ambientes e arquitetura da API
https://docs.cielo.com.br/ecommerce-cielo/reference/sobre-a-api
[10] O que é o certificado TLS/SSL?
https://docs.cielo.com.br/ecommerce-cielo/docs/certificado-ssl
[23] [24] Status transacional
https://docs.cielo.com.br/ecommerce-cielo/reference/status-transacional
[25] Revogar e criar credenciais no site Cielo
https://docs.cielo.com.br/ecommerce-cielo/reference/revogar-e-criar-credenciais-no-site-cielo
